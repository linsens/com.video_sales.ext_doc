# Работа со страницами оплаты

* [Получение списка всех платежных страниц](#Получение-списка-всех-платежных-страниц)
* [Оплата](#Оплата)

## Получение списка всех платежных страниц
* **URL**

`/ext/api/v1/promo_pages/`

* **Метод**

`GET`

* **URL параметры**

Отсутствуют

* **Параметры данных**

Отсутствуют

* **Пример ответа**

```json
[
    {
        "id": 1,
        "title": "Продажа природы", 
        "videoId": 1,
        "noPinViews": 2,
        "price": 1234.0,
        "currency": "EUR", 
        "contentInfo": "Для видео \"Beautiful Nature\"", 
        "successOrders": 6, 
        "totalOrders": 7
    }, 
    {
        "id": 2, 
        "title": "", 
        "playListId": 1, 
        "price": 1000.0, 
        "currency": "EUR", 
        "contentInfo": "Для плейлиста \"Саша\"", 
        "successOrders": 2, 
        "totalOrders": 4
    }
]     
```

* **Описание параметров ответа**

Название поля | Описание
------------- | --------
id | Уникальный идентификатор страницы оплаты
title | Служебный заголовок. Может быть пустой, либо отсутствовать.
videoId | Уникальный идентификатор видео. `Не использовать. Скоро будет удален.`
playListId | Уникальный идентификатор плейлиста
noPinViews | Количество просмотров плейлиста без ввода пин кода. Может отсутствовать.
price | Цена
currency | Валюта. RUR, EUR, USD, GBP, UAH
contentInfo | Генерируемое описание платежной страницы. Служебное. `Скорее всего будет удалено. Использовать только для отладки.`
successOrders | Количество успешных покупок.
totalOrders | Общее количество покупок.

## Оплата

Для выполнения данного запроса авторизация не требуется.

* **URL**

`/ext/api/v1/promo_pages/{id}/buy/`

* **Метод**

`POST`

* **URL параметры**

Параметр | Описание
-------- | --------
{id} | Уникальный идентификатор страницы оплаты.
email | Email пользователя на который будет выслана ссылка для просмотра покупки. `Обязательный параметр.`
successURL | URL для уведомления об успешной оплате. `Необязательный параметр.`
failureURL | URL для уведомления о неуспешной оплате. `Необязательный параметр.`
returnURL | URL на который будет произведен редирект после оплаты. `Необязательный параметр.`

* **Параметры данных**

Отсутствуют

* **Ответ**

Если все параметры переданы успешно, то будет переадресация на страницу оплаты

