# Работа с мерчантами

* [Проверка существования мерчанта](#Проверка-существования-мерчанта)
* [Отправка кода для регистрации](#Отправка-кода-для-регистрации)
* [Создание мерчанта](#Создание-мерчанта)
* [Отправка кода для авторизации](#Отправка-кода-для-авторизации)
* [Авторизация по коду](#Авторизация-по-коду)


## Проверка существования мерчанта
Метод не требует авторизации

* **URL**

`/ext/api/v1/merchant/public/exists/`

* **Метод**

`GET`

* **URL параметры**

Название поля | Описание
------------- | --------
token | Уникальный токен. Необходимо запросить.
phone | Номер телефона мерчанта.
email | email мерчанта

* **Параметры данных**

Отсутствуют

* **Пример ответа**

```json
{
  "exists" :  true,
  "hasLoyaltySettings": false
}
```

Название поля | Описание
------------- | --------
exists | true, если мерчант с тааким номером телефона или email существует.
hasLoyaltySettings | Есть ли у мерчанта активная система лояльности.

## Отправка кода для регистрации
Метод не требует авторизации

* **URL**

`/ext/api/v1/merchant/public/send_code/`

* **Метод**

`POST`

* **URL параметры**

Название поля | Описание
------------- | --------
token | Уникальный токен. Необходимо запросить.
phone | Номер телефона мерчанта.
email | email мерчанта

Если указан и email, и номер телефона, то сообщение будет отправлено только на email.

* **Параметры данных**

Отсутствуют

* **Пример ответа**

```json
{"code" :  "123456"}
```

## Создание мерчанта
Метод не требует авторизации

* **URL**

`/ext/api/v1/merchant/public/create/`

* **Метод**

`POST`

* **URL параметры**

Название поля | Описание
------------- | --------
token | Уникальный токен. Необходимо запросить.
code | Уникаль короткий токен, который был выслан на указанный адрес. см. отправка токена регистрации.
password | Пароль мерчанта

* **Параметры данных**

```json
{
  "email" : "email@email.ru",
  "phone" : "+7 (123) 123-23-32",
  "firstName": "Vasya",
  "lastName": "Pupkin",
  "company": "Рога и копыта",
  "companyURL": "https://test.test/",
  "inn" : "1234356789"
}
```

* **Описание параметров запроса**

Название поля | Описание
------------- | --------
email | Email.
phone | Номер телефона. Может быть передан в любом формате. Из него будут удалены все \D
firstName | Имя. Опциональный параметр.
lastName | Фамилия. Опциональный параметр.
company | Название компании. Опциональный параметр.
companyURL | URL сайта компании. Опциональный параметр.
inn | ИНН. Опциональный параметр.

* **Пример ответа**

200 ОК

## Отправка кода для авторизации
Метод не требует авторизации

* **URL**

`/ext/api/v1/merchant/public/send_auth_code/`

* **Метод**

`POST`

* **URL параметры**

Название поля | Описание
------------- | --------
token | Уникальный токен. Необходимо запросить.
phone | Номер телефона мерчанта.
email | email мерчанта

Если указан и email, и номер телефона, то сообщение будет отправлено только на email.

* **Параметры данных**

Отсутствуют

* **Пример ответа**

```json
{"code" :  "123456"}
```


## Авторизация по коду
Метод не требует авторизации

* **URL**

`/ext/api/v1/merchant/public/auth_via_code/`

* **Метод**

`POST`

* **URL параметры**

Название поля | Описание
------------- | --------
token | Уникальный токен. Необходимо запросить.
phone | Номер телефона мерчанта.
email | email мерчанта
code | код из сообщения

* **Параметры данных**

Отсутствуют

* **Пример ответа**

```json
{"code" :  "123456"}
```


